<h1>Classroom</h1>
<h3> You are </h3>
<div class="username">
 <% if @username %>
   <%= @username %>
 <% else %>
    <%= link_to "login first", "/" %>
 <% end %>
</div>


<h3> Online </h3>
<div class="online-user">

</div>
<div class="online-user-number">

</div>



<script>
    var socket = io.connect("<%= Settings.socket_url %>");
    var username = $.trim($('.username')[0].innerHTML);
    socket.emit('joiner-name', $.trim($('.username')[0].innerHTML));
    socket.emit('add user', username);
    // Whenever the server emits 'user joined', log it in the chat body
    socket.on('user joined', function (data) {
      $('.online-user-number').text(data.numUsers + " members" + JSON.stringify(data.usernames));
    });

    socket.on('user left', function(data){
      $('.online-user-number').text(data.numUsers + " members");
    });
</script>
